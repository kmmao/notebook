# Auto-Claude 学习笔记

## 源码阅读计划

### Week 1: 项目结构
- [ ] 理解目录布局
- [ ] 阅读run.py入口
- [ ] 分析scripts/目录

### Week 2: 多会话系统
- [ ] Worktree管理实现
- [ ] 会话状态机
- [ ] 并发控制

### Week 3: 自主执行
- [ ] YOLO模式实现
- [ ] 安全边界定义
- [ ] 失败恢复机制

### Week 4: 终端UI
- [ ] UI框架选择
- [ ] 组件设计
- [ ] 实时更新机制

---

## 关键发现

### 发现1: Worktree隔离策略

**日期**: 

**描述**: Auto-Claude使用Git worktree实现会话隔离

**优点**:
- 完全独立的文件系统
- 每个任务有自己的分支
- 可以并行修改不冲突

**代码位置**: 

---

### 发现2: YOLO模式的实现

**日期**: 

**描述**: 

**安全考虑**:
- 即使YOLO模式也有操作白名单
- 危险操作仍需确认
- 完整审计日志

---

### 发现3: 终端UI设计

**日期**: 

**技术栈**: Rich + Textual (Python)

**亮点**:
- 实时更新多会话状态
- 清晰的进度可视化
- 快捷键操作

---

## 可复用的设计模式

### 模式1: Worktree隔离

**场景**: 需要并行处理多个独立任务

**实现**:
1. 为每个任务创建独立分支
2. 使用git worktree创建独立目录
3. 每个目录独立运行
4. 完成后合并或创建PR

**可应用于**: 
- CI/CD并行构建
- 多功能并行开发
- A/B测试

---

### 模式2: 自主执行边界

**场景**: 允许自动化但需要安全边界

**实现**:
1. 定义操作白名单/黑名单
2. 实现范围强制执行器
3. 完整的审计日志
4. 自动回滚能力

**可应用于**:
- 自动化运维
- CI/CD流水线
- 任何需要自动化但有风险的场景

---

## 与其他项目对比

| 特性 | OpenCode | Oh-My-OpenCode | Auto-Claude |
|------|----------|----------------|-------------|
| 核心语言 | TS/Go | TS | Python |
| 多会话 | ✓ | ✓ | ✓✓✓ |
| 自主执行 | - | 部分 | ✓✓✓ |
| Agent系统 | 基础 | 完整 | 中等 |
| Worktree | - | - | ✓ |
| 终端UI | ✓ | ✓ | ✓✓ |
| YOLO模式 | - | - | ✓ |

---

## 问题记录

| 问题 | 状态 | 答案/进展 |
|------|------|-----------|
| 如何处理会话间冲突？ | 待研究 | |
| YOLO模式的安全边界具体是什么？ | 待研究 | |
| 如何与GitHub Actions集成？ | 待研究 | |
| 支持哪些AI提供商？ | 开发中 | Claude为主，计划支持OpenAI/Gemini/Kimi |

---

## 待深入研究

1. [ ] Python终端UI框架（Rich/Textual）
2. [ ] Git worktree高级用法
3. [ ] 多进程/协程管理
4. [ ] API限流策略

---

## 个人思考

### 为什么需要自主执行？

传统的AI助手需要每一步确认，效率低下。Auto-Claude的YOLO模式让AI可以像人类开发者一样自主完成任务。

### 风险与收益权衡

- **收益**: 效率大幅提升
- **风险**: 可能产生意外修改
- **缓解**: 范围限制 + 审计日志 + 自动回滚

### 未来方向

1. 多模型支持（不仅是Claude）
2. 更智能的任务分解
3. 跨仓库协作
4. 与DevOps工具链集成

---

## 参考资料

- [GitHub源码](https://github.com/AndyMik90/Auto-Claude)
- [Releases](https://github.com/AndyMik90/Auto-Claude/releases)
- [Rich文档](https://rich.readthedocs.io/)
- [Textual文档](https://textual.textualize.io/)
